<!DOCTYPE HTML>
<html lang="de">
<head>
<!-- Generated by javadoc (17) -->
<title>BlukiiClient (blukii Android SDK Documentation 4.1.0)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: com.blukii.sdk.discovery, class: BlukiiClient">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.6.0.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<div class="about-language"><span style="display:flex; align-items:center; margin-top:4px; margin-bottom:3px"><img src="https://www.blukii.com/wp-content/uploads/Logo_blukii_weiss.png" width="32px" height="32px" style="margin-right:8px"/>blukii Android SDK Documentation 4.1.0</span></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">com.blukii.sdk.discovery</a></div>
<h1 title="Class BlukiiClient" class="title">Class BlukiiClient</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">com.blukii.sdk.discovery.BlukiiClient</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="modifiers">public final class </span><span class="element-name type-name-label">BlukiiClient</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">Main controller class of package <i>discovery</i>, for discovering BLE modules and their
 advertised data

 <p>BlukiiClient class contains discovery functions as follows:
 <ul>
 <li>Discovery of BLE modules and extracting BLE advertised data
 <li>Decryption of blukii SecureBeacon advertising.
 </ul>

 <h2>A. Discover BLE modules and extract their BLE data</h2>
 <p>To do this you have to do the following steps:

 <h3>1. Initialize and start discovery</h3>
 <p>Call <a href="#initDiscovery(com.blukii.sdk.discovery.BlukiiClient.OnDiscoveryListener)"><code>initDiscovery(OnDiscoveryListener)</code></a> and implement the
 <a href="BlukiiClient.OnDiscoveryListener.html" title="interface in com.blukii.sdk.discovery"><code>BlukiiClient.OnDiscoveryListener</code></a> callbacks. Now you can start and stop the discovery as needed.

 <p><b>Note:</b> Do not forget to terminate blukii discovery (<a href="#terminateDiscovery()"><code>terminateDiscovery()</code></a>)
 for releasing resources if you do not need the discovery any more.

 <pre><code>
  &#64;Override
  protected void onCreate(Bundle savedInstanceState) {
      // Initialize blukii discovery (see also <a href="../common/BlukiiController.html" title="class in com.blukii.sdk.common"><code>BlukiiController</code></a>)
      mBlukiiClient = BlukiiController.getInstance().getDiscoveryClient();
      mBlukiiClient.initDiscovery(blukiiDiscoveryListener);
      mBlukiiClient.startDiscovery();
  }

  BlukiiClient.OnDiscoveryListener blukiiDiscoveryListener = new BlukiiClient.OnDiscoveryListener() {

      &#64;Override
      public void onDiscoveryResult(List&lt;DiscoveryData&gt; discoveryResultList) {
          // retrieve BLE results
      }

      &#64;Override
      public void onError(BlukiiDiscoveryError errorCode) {
          // retrieve errors
      }

      &#64;Override
      public void onInfo(BlukiiDiscoveryInfo infoCode) {
          // retrieve infos and changed states
      }
  };

  public void startDiscovery() {
      // start BLE scan
      mBlukiiClient.startDiscovery();
  }

  public void stopDiscovery() {
      // stop BLE scan
      mBlukiiClient.stopDiscovery();
  }

  &#64;Override
  public void onDestroy() {
      // Terminate blukii discovery
      if(mBlukiiClient != null) {
          mBlukiiClient.terminateDiscovery();
      }
  }
 </code></pre>

 <h3>2. Configure discovery settings</h3>
 <p>Use the <a href="DiscoverySettings.html" title="class in com.blukii.sdk.discovery"><code>DiscoverySettings</code></a> object for configuring discovery.
 Call <a href="#getDiscoverySettings()"><code>getDiscoverySettings()</code></a> to retrieve the settings property set.

 <pre><code>
  &#64;Override
  protected void onCreate(Bundle savedInstanceState) {
      mBlukiiClient = BlukiiController.getInstance().getDiscoveryClient();
      mBlukiiClient.initDiscovery(blukiiDiscoveryListener);

      // change discovery settings
      DiscoverySettings discoverySettings = mBlukiiClient.getDiscoverySettings();
      discoverySettings.setRssiThreshold(-100);
      discoverySettings.setScanDuration(10000);
      discoverySettings.setProfile(DiscoveryProfile.FOREGROUND);
      // ...

      mBlukiiClient.startDiscovery();
  }
 </code></pre>

 <p>When BLE scanner is started the BLE discovery is acting according
 to the <a href="DiscoverySettings.html" title="class in com.blukii.sdk.discovery"><code>DiscoverySettings</code></a>:
 <ul>
 <li>The scanner is searching for BLE modules inside the defined rssi range
     (<a href="DiscoverySettings.html#getRssiThreshold()"><code>DiscoverySettings.getRssiThreshold()</code></a>).
 <li>After one scan duration (<a href="DiscoverySettings.html#getScanDuration()"><code>DiscoverySettings.getScanDuration()</code></a>) the results are
     called back to (<a href="BlukiiClient.OnDiscoveryListener.html#onDiscoveryResult(java.util.List)"><code>BlukiiClient.OnDiscoveryListener.onDiscoveryResult(List)</code></a>).
 <li>The BLE scanner is effectively scanning according the discovery profile setting
     (see <a href="DiscoverySettings.html#setProfile(int)"><code>DiscoverySettings.setProfile(int)</code></a>. It defines whether the scan is running
     on foreground, background and screen off.
 <li>blukii SDK is managing intelligently the internal start and stop of the BLE scanner.
     These state changes are told by the callback <a href="BlukiiClient.OnDiscoveryListener.html#onInfo(com.blukii.sdk.discovery.BlukiiDiscoveryInfo)"><code>BlukiiClient.OnDiscoveryListener.onInfo(com.blukii.sdk.discovery.BlukiiDiscoveryInfo)</code></a>
 </ul>

 <h3>3. Retrieve results</h3>
 <p>The callback <a href="BlukiiClient.OnDiscoveryListener.html#onDiscoveryResult(java.util.List)"><code>BlukiiClient.OnDiscoveryListener.onDiscoveryResult(List)</code></a> will be called after
 finishing every discovery phase. It retrieves the discovered list of DiscoveryData objects.

 <p><b>Note:</b> If no BLE modules have been found discoveryResultList is empty (not null).

 <pre><code>
 &#64;Override
 public void onDiscoveryResult(List&lt;DiscoveryData&gt; discoveryDataList) {
     // Discovery phase has finished: list of DiscoveryData objects are retrieved
     int count = discoveryResultList.size();
     for (DiscoveryData discoveryData : discoveryDataList) {
         String id = discoveryData.getBlukiiId();
         short rssi = discoveryData.getRssi();
         // ...
     }
 }
 </code></pre>

 <p><b>Note:</b> As default advertising data packets of one device are bundled to one DiscoveryData
 list item. See <a href="DiscoverySettings.html#setListEveryFrame(boolean)"><code>DiscoverySettings.setListEveryFrame(boolean)</code></a> if you want to retrieve each
 advertising packet as single item.

 <h4>4. Retrieve errors and infos</h4>
 <p>The callbacks <a href="BlukiiClient.OnDiscoveryListener.html#onError(com.blukii.sdk.discovery.BlukiiDiscoveryError)"><code>BlukiiClient.OnDiscoveryListener.onError(com.blukii.sdk.discovery.BlukiiDiscoveryError)</code></a> and <a href="BlukiiClient.OnDiscoveryListener.html#onInfo(com.blukii.sdk.discovery.BlukiiDiscoveryInfo)"><code>BlukiiClient.OnDiscoveryListener.onInfo(com.blukii.sdk.discovery.BlukiiDiscoveryInfo)</code></a>
 will be called if there is important information about the discovery process.

 <pre><code>
 &#64;Override
 public void onError(BlukiiDiscoveryError errorCode) {
     // An error has been sent from discovery
 }

 &#64;Override
 public void onInfo(BlukiiDiscoveryInfo infoCode) {
     // An info has been sent from discovery
 }
 </code></pre>

 <h3>5. Permissions</h3>
 <p>For getting access to Android Bluetooth the app user has to give the permission.

 <p>For Bluetooth LE you need to insert the following permissions to your AndroidManifest.xml:
 <pre><code>
 &lt;uses-permission android:name="android.permission.BLUETOOTH" /&gt;
 &lt;uses-permission android:name="android.permission.BLUETOOTH_ADMIN" /&gt;
 </code></pre>

 <p>For Apps with targetSdkVersion 23 (Android 6) and later you need to add the following permission.
 <pre><code>
 &lt;uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /&gt;
 </code></pre>

 <p>For Apps with targetSdkVersion 31 (Android 12) and later you need to add the following permission:
 <pre><code>
 &lt;uses-permission android:name="android.permission.BLUETOOTH_SCAN" /&gt;
 &lt;uses-permission android:name="android.permission.BLUETOOTH_CONNECT" /&gt;
 </code></pre>

 <p>For Apps with targetSdkVersion 29 (Android 10) and later that should use discovery in background
 you additionally have to handle the following permission in combination with <code>ACCESS_FINE_LOCATION</code>.
 Therefore please read Google's manual about
 <u><a href="https://developer.android.com/about/versions/10/privacy/changes#app-access-device-location">access to device location in the background</a></u>.
 <pre><code>
 &lt;uses-permission android:name="android.permission.ACCESS_BACKGROUND_LOCATION" /&gt;
 </code></pre>

 <p>Please be aware that you have to handle Runtime Permissions in your App since Android 6.
 This <u><a href="https://inthecheesefactory.com/blog/things-you-need-to-know-about-android-m-permission-developer-edition/en">blog</a></u>
 gives you a good instruction.

 <p>Example:
 <pre><code>
 &#64;Override
 protected void onCreate(Bundle savedInstanceState) {
     mBlukiiClient = BlukiiController.getInstance().getDiscoveryClient();

     if(!mBlukiiClient.isDiscoveryInitialized()) {
         mBlukiiClient.initDiscovery(blukiiDiscoveryListener);
     }

     if (checkPermissions()) {
         // Permission has been granted before
         mBlukiiClient.startDiscovery();
     } else {
         // Permission has not been granted before
         if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.S) {
             ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.ACCESS_FINE_LOCATION, Manifest.permission.BLUETOOTH_SCAN, Manifest.permission.BLUETOOTH_CONNECT}, REQUEST_CODE_ASK_PERMISSIONS);
         } else {
             ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, REQUEST_CODE_ASK_PERMISSIONS);
         }
     }
 }

 private boolean checkPermissions() {
     if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {
         // Android 6 and later
         if (ContextCompat.checkSelfPermission(getApplicationContext(), Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED) {
             return false;
         }
         if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.S) {
             if (ContextCompat.checkSelfPermission(getApplicationContext(), Manifest.permission.BLUETOOTH_SCAN) != PackageManager.PERMISSION_GRANTED) {
                 return false;
             }
             if (ContextCompat.checkSelfPermission(getApplicationContext(), Manifest.permission.BLUETOOTH_CONNECT) != PackageManager.PERMISSION_GRANTED) {
                 return false;
             }
         }
     }
     // Permission granted or Android 5.x and earlier
     return true;

 }

 &#64;Override
 public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {
     if (requestCode != REQUEST_CODE_ASK_PERMISSIONS) {
         super.onRequestPermissionsResult(requestCode, permissions, grantResults);
         return;
     }

     for(int grantResultIndex=0; grantResultIndex &lt; grantResults.length; grantResultIndex++) {
         if(grantResults[grantResultIndex] == PackageManager.PERMISSION_DENIED) {
             // At least one permission denied
             Log.e("PermissionResult", "Permission denied: code=" + grantResultIndex);
             return;
         }
     }

     // Permission Granted
     mBlukiiClient.startDiscovery();
 }
 </code></pre>

 <h2>B. Decryption of SecureBeacon advertising</h2>
 <p>blukii SecureBeacons are encrypted to prevent third parties from misusing the Beacon identification.

 <p>The encryption is affecting the mac address and the iBeacon Major and Minor value.

 <p>You can decrypt DiscoveryData by calling <a href="#decryptSecureBeacons(java.util.List,com.blukii.sdk.discovery.BlukiiClient.OnDecryptSecureBeaconsListener)"><code>decryptSecureBeacons(List, OnDecryptSecureBeaconsListener)</code></a>.

 <p>The callback <a href="BlukiiClient.OnDecryptSecureBeaconsListener.html#onDecryptSecureBeacons(java.util.List,int)"><code>BlukiiClient.OnDecryptSecureBeaconsListener.onDecryptSecureBeacons(List, int)</code></a> is
 retrieving a copy of the input parameter list containing decrypted values. Each <a href="DiscoveryData.html" title="class in com.blukii.sdk.discovery"><code>DiscoveryData</code></a>
 object, that has been decrypted is marked with <a href="DiscoveryData.html#getSecureBeaconState()"><code>DiscoveryData.getSecureBeaconState()</code></a>
 as <a href="SecureBeaconState.html#DECRYPTED"><code>SecureBeaconState.DECRYPTED</code></a>.

 <pre><code>
 mBlukiiClient.decryptSecureBeacons(discoveryResultList, new BlukiiClient.OnDecryptSecureBeaconsListener() {
     &#64;Override
     public void onDecryptSecureBeacons(List&lt;DiscoveryData&gt; decryptedDiscoveryDataList, int decryptedCount) {
         Log.d("BlukiiClient.onDiscoveryResult: DecryptSecureBeacons successful:  Count=" + decryptedCount);
     }

     &#64;Override
     public void onError(BlukiiCloudError error) {
         Log.w("BlukiiClient.onDiscoveryResult: DecryptSecureBeacons failed: error=" + error.toString());
     }
 });
 </code></pre>

 <p><b>Note:</b> SecureBeacons can only be decrypted by its owner, so the corresponding user needs
 to be logged in (@see <a href="../cloud/BlukiiCloud.html" title="class in com.blukii.sdk.cloud"><code>BlukiiCloud</code></a>).

 <p>Additionally, <code>android.permission.INTERNET</code> has to be declared as 'user-permission'
 in your apps manifest.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static interface&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="BlukiiClient.OnDecryptSecureBeaconsListener.html" class="type-name-link" title="interface in com.blukii.sdk.discovery">BlukiiClient.OnDecryptSecureBeaconsListener</a></code></div>
<div class="col-last even-row-color">
<div class="block">Listener interface for callbacks of <a href="#decryptSecureBeacons(java.util.List,com.blukii.sdk.discovery.BlukiiClient.OnDecryptSecureBeaconsListener)"><code>decryptSecureBeacons(List, OnDecryptSecureBeaconsListener)</code></a>.</div>
</div>
<div class="col-first odd-row-color"><code>static interface&nbsp;</code></div>
<div class="col-second odd-row-color"><code><a href="BlukiiClient.OnDiscoveryListener.html" class="type-name-link" title="interface in com.blukii.sdk.discovery">BlukiiClient.OnDiscoveryListener</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Callbacks for the BLE discovery.</div>
</div>
</div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static final int</code></div>
<div class="col-second even-row-color"><code><a href="#SECUREBEACON_CACHETIMEOUT_DEFAULT" class="member-name-link">SECUREBEACON_CACHETIMEOUT_DEFAULT</a></code></div>
<div class="col-last even-row-color">
<div class="block">Default cache timeout for secure beacon decryption: 180000 milliseconds (30 minutes)</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#decryptSecureBeacons(java.util.List,com.blukii.sdk.discovery.BlukiiClient.OnDecryptSecureBeaconsListener)" class="member-name-link">decryptSecureBeacons</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="DiscoveryData.html" title="class in com.blukii.sdk.discovery">DiscoveryData</a>&gt;&nbsp;discoveryDataList,
 <a href="BlukiiClient.OnDecryptSecureBeaconsListener.html" title="interface in com.blukii.sdk.discovery">BlukiiClient.OnDecryptSecureBeaconsListener</a>&nbsp;listener)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Tries to decrypt the <a href="DiscoveryData.html" title="class in com.blukii.sdk.discovery"><code>DiscoveryData</code></a> list items that are marked with
 <a href="DiscoveryData.html#getSecureBeaconState()"><code>DiscoveryData.getSecureBeaconState()</code></a> as <a href="SecureBeaconState.html#ENCRYPTED"><code>SecureBeaconState.ENCRYPTED</code></a>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getDecryptSecureBeaconCacheTimeout()" class="member-name-link">getDecryptSecureBeaconCacheTimeout</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Gets the current cache timeout for secure beacon decryption.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="DiscoverySettings.html" title="class in com.blukii.sdk.discovery">DiscoverySettings</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getDiscoverySettings()" class="member-name-link">getDiscoverySettings</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Gets the discovery settings object.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#initDiscovery(com.blukii.sdk.discovery.BlukiiClient.OnDiscoveryListener)" class="member-name-link">initDiscovery</a><wbr>(<a href="BlukiiClient.OnDiscoveryListener.html" title="interface in com.blukii.sdk.discovery">BlukiiClient.OnDiscoveryListener</a>&nbsp;onDiscoveryListener)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Initializes the discovery client and loads the needed resources.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isDiscovering()" class="member-name-link">isDiscovering</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Gets the state if BLE scanner is actually running.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isDiscoveryInitialized()" class="member-name-link">isDiscoveryInitialized</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Gets the state if the discovery is initialized.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setDecryptSecureBeaconCacheTimeout(int)" class="member-name-link">setDecryptSecureBeaconCacheTimeout</a><wbr>(int&nbsp;decryptSecureBeaconCacheTimeout)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Sets the current cache timeout for secure beacon decryption.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#startDiscovery()" class="member-name-link">startDiscovery</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Starts the BLE scanning.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#stopDiscovery()" class="member-name-link">stopDiscovery</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Stops the BLE scanner.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#terminateDiscovery()" class="member-name-link">terminateDiscovery</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Terminates the discovery client.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="SECUREBEACON_CACHETIMEOUT_DEFAULT">
<h3>SECUREBEACON_CACHETIMEOUT_DEFAULT</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">SECUREBEACON_CACHETIMEOUT_DEFAULT</span></div>
<div class="block">Default cache timeout for secure beacon decryption: 180000 milliseconds (30 minutes)</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><a href="#getDecryptSecureBeaconCacheTimeout()"><code>getDecryptSecureBeaconCacheTimeout()</code></a></li>
<li><a href="#setDecryptSecureBeaconCacheTimeout(int)"><code>setDecryptSecureBeaconCacheTimeout(int)</code></a></li>
<li><a href="#decryptSecureBeacons(java.util.List,com.blukii.sdk.discovery.BlukiiClient.OnDecryptSecureBeaconsListener)"><code>decryptSecureBeacons(List, OnDecryptSecureBeaconsListener)</code></a></li>
<li><a href="../../../../constant-values.html#com.blukii.sdk.discovery.BlukiiClient.SECUREBEACON_CACHETIMEOUT_DEFAULT">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="getDiscoverySettings()">
<h3>getDiscoverySettings</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="DiscoverySettings.html" title="class in com.blukii.sdk.discovery">DiscoverySettings</a></span>&nbsp;<span class="element-name">getDiscoverySettings</span>()</div>
<div class="block">Gets the discovery settings object.

 <p>It is null, if discovery is not initialized!</div>
<dl class="notes">
<dt>Returns:</dt>
<dd><a href="DiscoverySettings.html" title="class in com.blukii.sdk.discovery"><code>DiscoverySettings</code></a> object</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="DiscoverySettings.html" title="class in com.blukii.sdk.discovery"><code>DiscoverySettings</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isDiscovering()">
<h3>isDiscovering</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isDiscovering</span>()</div>
<div class="block">Gets the state if BLE scanner is actually running.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true, if BLE scanner is scanning</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="#startDiscovery()"><code>startDiscovery()</code></a></li>
<li><a href="#stopDiscovery()"><code>stopDiscovery()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="startDiscovery()">
<h3>startDiscovery</h3>
<div class="member-signature"><span class="annotations">@RequiresPermission(allOf={"android.permission.BLUETOOTH","android.permission.BLUETOOTH_ADMIN","android.permission.ACCESS_FINE_LOCATION"})
</span><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">startDiscovery</span>()</div>
<div class="block">Starts the BLE scanning.

 <p>If not successful an error is send by the
 <a href="BlukiiClient.OnDiscoveryListener.html#onError(com.blukii.sdk.discovery.BlukiiDiscoveryError)"><code>BlukiiClient.OnDiscoveryListener.onError(BlukiiDiscoveryError)</code></a> callbacks.

 <p>During BLE scanning the BLE scanner is started and stopped internally according the
 discovery settings (see <a href="DiscoverySettings.html" title="class in com.blukii.sdk.discovery"><code>DiscoverySettings</code></a>. You are getting informed by the
 <a href="BlukiiClient.OnDiscoveryListener.html#onInfo(com.blukii.sdk.discovery.BlukiiDiscoveryInfo)"><code>BlukiiClient.OnDiscoveryListener.onInfo(BlukiiDiscoveryInfo)</code></a> callbacks.

 <p>It only can be started if the discovery service has been initialized before by calling
 <a href="#initDiscovery(com.blukii.sdk.discovery.BlukiiClient.OnDiscoveryListener)"><code>initDiscovery(OnDiscoveryListener)</code></a>!

 <p>You can stop scanning by calling <a href="#stopDiscovery()"><code>stopDiscovery()</code></a>.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><a href="#stopDiscovery()"><code>stopDiscovery()</code></a></li>
<li><a href="#isDiscoveryInitialized()"><code>isDiscoveryInitialized()</code></a></li>
<li><a href="BlukiiClient.OnDiscoveryListener.html" title="interface in com.blukii.sdk.discovery"><code>BlukiiClient.OnDiscoveryListener</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="stopDiscovery()">
<h3>stopDiscovery</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">stopDiscovery</span>()</div>
<div class="block">Stops the BLE scanner.

 <p>You can start scanning by calling <a href="#startDiscovery()"><code>startDiscovery()</code></a>.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><a href="#startDiscovery()"><code>startDiscovery()</code></a></li>
<li><a href="BlukiiClient.OnDiscoveryListener.html" title="interface in com.blukii.sdk.discovery"><code>BlukiiClient.OnDiscoveryListener</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="initDiscovery(com.blukii.sdk.discovery.BlukiiClient.OnDiscoveryListener)">
<h3>initDiscovery</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">initDiscovery</span><wbr><span class="parameters">(@NonNull
 <a href="BlukiiClient.OnDiscoveryListener.html" title="interface in com.blukii.sdk.discovery">BlukiiClient.OnDiscoveryListener</a>&nbsp;onDiscoveryListener)</span></div>
<div class="block">Initializes the discovery client and loads the needed resources.

 <p>This is required before calling <a href="#startDiscovery()"><code>startDiscovery()</code></a> and <a href="#stopDiscovery()"><code>stopDiscovery()</code></a> for
 starting and stopping the discovery for BLE modules.

 <p>Without <a href="#startDiscovery()"><code>startDiscovery()</code></a> DeviceDiscoveryService is not doing any action and
 therefore not using the battery.

 <p><b>Note:</b> DeviceDiscoveryService is not reliably unbound by android garbage collector.
 Please call <a href="#terminateDiscovery()"><code>terminateDiscovery()</code></a> if you do not need the discovery any more or if you
 need to re-instantiate the BlukiiClient object.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>onDiscoveryListener</code> - listener interface for callbacks</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="#isDiscoveryInitialized()"><code>isDiscoveryInitialized()</code></a></li>
<li><a href="#startDiscovery()"><code>startDiscovery()</code></a></li>
<li><a href="#stopDiscovery()"><code>stopDiscovery()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="terminateDiscovery()">
<h3>terminateDiscovery</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">terminateDiscovery</span>()</div>
<div class="block">Terminates the discovery client.

 <p>Call this action if you do need the discovery client any more for releasing resources.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><a href="#initDiscovery(com.blukii.sdk.discovery.BlukiiClient.OnDiscoveryListener)"><code>initDiscovery(OnDiscoveryListener)</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isDiscoveryInitialized()">
<h3>isDiscoveryInitialized</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isDiscoveryInitialized</span>()</div>
<div class="block">Gets the state if the discovery is initialized.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true, if discovery is initialized</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getDecryptSecureBeaconCacheTimeout()">
<h3>getDecryptSecureBeaconCacheTimeout</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getDecryptSecureBeaconCacheTimeout</span>()</div>
<div class="block">Gets the current cache timeout for secure beacon decryption.

 <p>If value is 0, cache is off.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>cache timeout in milliseconds</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setDecryptSecureBeaconCacheTimeout(int)">
<h3>setDecryptSecureBeaconCacheTimeout</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setDecryptSecureBeaconCacheTimeout</span><wbr><span class="parameters">(int&nbsp;decryptSecureBeaconCacheTimeout)</span></div>
<div class="block">Sets the current cache timeout for secure beacon decryption.

 <p>If value is 0, cache is off.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>decryptSecureBeaconCacheTimeout</code> - cache timeout in milliseconds</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="decryptSecureBeacons(java.util.List,com.blukii.sdk.discovery.BlukiiClient.OnDecryptSecureBeaconsListener)">
<h3>decryptSecureBeacons</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">decryptSecureBeacons</span><wbr><span class="parameters">(@NonNull
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="DiscoveryData.html" title="class in com.blukii.sdk.discovery">DiscoveryData</a>&gt;&nbsp;discoveryDataList,
 @NonNull
 <a href="BlukiiClient.OnDecryptSecureBeaconsListener.html" title="interface in com.blukii.sdk.discovery">BlukiiClient.OnDecryptSecureBeaconsListener</a>&nbsp;listener)</span></div>
<div class="block">Tries to decrypt the <a href="DiscoveryData.html" title="class in com.blukii.sdk.discovery"><code>DiscoveryData</code></a> list items that are marked with
 <a href="DiscoveryData.html#getSecureBeaconState()"><code>DiscoveryData.getSecureBeaconState()</code></a> as <a href="SecureBeaconState.html#ENCRYPTED"><code>SecureBeaconState.ENCRYPTED</code></a>.

 <p>If successful <a href="BlukiiClient.OnDecryptSecureBeaconsListener.html#onDecryptSecureBeacons(java.util.List,int)"><code>BlukiiClient.OnDecryptSecureBeaconsListener.onDecryptSecureBeacons(List, int)</code></a>
 is called with the result list, otherwise <a href="BlukiiClient.OnDecryptSecureBeaconsListener.html#onError(com.blukii.sdk.cloud.BlukiiCloudError)"><code>BlukiiClient.OnDecryptSecureBeaconsListener.onError(BlukiiCloudError)</code></a>
 is called.

 <p>Therefore an blukii Manager user authentication via
 <a href="../cloud/BlukiiCloud.html#login(com.blukii.sdk.cloud.BlukiiCloud.OnLoginListener)"><code>BlukiiCloud.login(BlukiiCloud.OnLoginListener)</code></a> is needed.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>discoveryDataList</code> - discoverData list that needs to be decrypted.</dd>
<dd><code>listener</code> - listener for <a href="BlukiiClient.OnDecryptSecureBeaconsListener.html" title="interface in com.blukii.sdk.discovery"><code>BlukiiClient.OnDecryptSecureBeaconsListener</code></a> callbacks.</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><a href="#getDecryptSecureBeaconCacheTimeout()"><code>getDecryptSecureBeaconCacheTimeout()</code></a></li>
<li><a href="BlukiiClient.OnDecryptSecureBeaconsListener.html" title="interface in com.blukii.sdk.discovery"><code>BlukiiClient.OnDecryptSecureBeaconsListener</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
